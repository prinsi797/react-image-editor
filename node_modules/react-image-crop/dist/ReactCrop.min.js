/*! For license information please see ReactCrop.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactCrop=t(require("react")):e.ReactCrop=t(e.React)}(this,(e=>(()=>{"use strict";var t={251:(e,t,o)=>{var n=o(899),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,o){var n,r={},d=null,c=null;for(n in void 0!==o&&(d=""+o),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)h.call(t,n)&&!s.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:i,type:e,key:d,ref:c,props:r,_owner:a.current}}t.Fragment=r,t.jsx=d,t.jsxs=d},893:(e,t,o)=>{e.exports=o(251)},899:t=>{t.exports=e}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var r=o[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{n.r(i),n.d(i,{Component:()=>g,areCropsEqual:()=>a,centerCrop:()=>d,clamp:()=>h,containCrop:()=>l,convertToPercentCrop:()=>c,convertToPixelCrop:()=>p,default:()=>g,defaultCrop:()=>r,makeAspectCrop:()=>s});var e=n(893),t=n(899);function o(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=o(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}const r={x:0,y:0,width:0,height:0,unit:"px"};function h(e,t,o){return Math.min(Math.max(e,t),o)}function a(e,t){return e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit}function s(e,t,o,n){const i=p(e,o,n);return e.width&&(i.height=i.width/t),e.height&&(i.width=i.height*t),i.y+i.height>n&&(i.height=n-i.y,i.width=i.height*t),i.x+i.width>o&&(i.width=o-i.x,i.height=i.width/t),"%"===e.unit?c(i,o,n):i}function d(e,t,o){const n=p(e,t,o);return n.x=(t-n.width)/2,n.y=(o-n.height)/2,"%"===e.unit?c(n,t,o):n}function c(e,t,o){return"%"===e.unit?{...r,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/o*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/o*100:0}}function p(e,t,o){return e.unit?"px"===e.unit?{...r,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*o/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*o/100:0}:{...r,...e,unit:"px"}}function l(e,t,o,n,i,r=0,h=0,a=n,s=i){const d={...e};let c=r,p=h,l=a,w=s;t&&(t>1?(c=h*t,l=a*t):(p=r/t,w=s/t)),d.y<0&&(d.height=Math.max(d.height+d.y,p),d.y=0),d.x<0&&(d.width=Math.max(d.width+d.x,c),d.x=0);const g=n-(d.x+d.width);g<0&&(d.x=Math.min(d.x,n-c),d.width+=g);const u=i-(d.y+d.height);if(u<0&&(d.y=Math.min(d.y,i-p),d.height+=u),d.width<c&&("sw"!==o&&"nw"!=o||(d.x-=c-d.width),d.width=c),d.height<p&&("nw"!==o&&"ne"!=o||(d.y-=p-d.height),d.height=p),d.width>l&&("sw"!==o&&"nw"!=o||(d.x-=l-d.width),d.width=l),d.height>w&&("nw"!==o&&"ne"!=o||(d.y-=w-d.height),d.height=w),t){const e=d.width/d.height;if(e<t){const e=d.width/t;"nw"!==o&&"ne"!=o||(d.y-=e-d.height),d.height=e}else if(e>t){const e=d.height*t;"sw"!==o&&"nw"!=o||(d.x-=e-d.width),d.width=e}}return d}const w={capture:!0,passive:!1};class g extends t.PureComponent{constructor(){super(...arguments),this.keysDown=new Set,this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=(0,t.createRef)(),this.mediaRef=(0,t.createRef)(),this.initChangeCalled=!1,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:t,disabled:o}=this.props,n=this.getBox();if(!t)return;const i=p(t,n.width,n.height);if(o)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const r=e.target.dataset.ord,h=Boolean(r);let a=e.clientX,s=e.clientY,d=i.x,c=i.y;r&&("ne"===r||"e"==r?(d=i.x,c=i.y+i.height):"se"===r||"s"===r?(d=i.x,c=i.y):"sw"===r||"w"==r?(d=i.x+i.width,c=i.y):"nw"!==r&&"n"!=r||(d=i.x+i.width,c=i.y+i.height),a=d+n.x,s=c+n.y),this.evData={startClientX:a,startClientY:s,startCropX:d,startCropY:c,clientX:e.clientX,clientY:e.clientY,isResize:h,ord:r},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:t,disabled:o,locked:n,keepSelection:i,onChange:r}=this.props,h=this.getBox();if(o||n||i&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const a=e.clientX-h.x,s=e.clientY-h.y,d={unit:"px",x:a,y:s,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:a,startCropY:s,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,r(p(d,h.width,h.height),c(d,h.width,h.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:t,disabled:o,onChange:n,onDragStart:i}=this.props,r=this.getBox();if(o||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,i&&i(e));const{evData:h}=this;let s;h.clientX=e.clientX,h.clientY=e.clientY,s=h.isResize?this.resizeCrop():this.dragCrop(),a(t,s)||n(p(s,r.width,r.height),c(s,r.width,r.height))},this.onComponentKeyDown=e=>{const{crop:t,disabled:o,onChange:n,onComplete:i}=this.props,r=this.getBox();if(o)return;this.keysDown.add(e.key);let a=!1;if(!t)return;const s=this.makePixelCrop(),d=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?g.nudgeStepLarge:e.shiftKey?g.nudgeStepMedium:g.nudgeStep;if(this.keysDown.has("ArrowLeft")&&(s.x-=d,a=!0),this.keysDown.has("ArrowRight")&&(s.x+=d,a=!0),this.keysDown.has("ArrowUp")&&(s.y-=d,a=!0),this.keysDown.has("ArrowDown")&&(s.y+=d,a=!0),a){e.cancelable&&e.preventDefault(),s.x=h(s.x,0,r.width-s.width),s.y=h(s.y,0,r.height-s.height);const t=p(s,r.width,r.height),o=c(s,r.width,r.height);n(t,o),i&&i(t,o)}},this.onHandlerKeyDown=(e,t)=>{const{aspect:o=0,crop:n,disabled:i,minWidth:r=0,minHeight:h=0,maxWidth:s,maxHeight:d,onChange:w,onComplete:u}=this.props,y=this.getBox();if(i||!n)return;if("ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;e.stopPropagation(),e.preventDefault();const x=p(n,y.width,y.height),m=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?g.nudgeStepLarge:e.shiftKey?g.nudgeStepMedium:g.nudgeStep;"ArrowLeft"===e.key?"nw"===t?(x.x-=m,x.y-=m,x.width+=m,x.height+=m):"w"===t?(x.x-=m,x.width+=m):"sw"===t?(x.x-=m,x.width+=m,x.height+=m):"ne"===t?(x.y+=m,x.width-=m,x.height-=m):"e"===t?x.width-=m:"se"===t&&(x.width-=m,x.height-=m):"ArrowRight"===e.key&&("nw"===t?(x.x+=m,x.y+=m,x.width-=m,x.height-=m):"w"===t?(x.x+=m,x.width-=m):"sw"===t?(x.x+=m,x.width-=m,x.height-=m):"ne"===t?(x.y-=m,x.width+=m,x.height+=m):"e"===t?x.width+=m:"se"===t&&(x.width+=m,x.height+=m)),"ArrowUp"===e.key?"nw"===t?(x.x-=m,x.y-=m,x.width+=m,x.height+=m):"n"===t?(x.y-=m,x.height+=m):"ne"===t?(x.y-=m,x.width+=m,x.height+=m):"sw"===t?(x.x+=m,x.width-=m,x.height-=m):"s"===t?x.height-=m:"se"===t&&(x.width-=m,x.height-=m):"ArrowDown"===e.key&&("nw"===t?(x.x+=m,x.y+=m,x.width-=m,x.height-=m):"n"===t?(x.y+=m,x.height-=m):"ne"===t?(x.y+=m,x.width-=m,x.height-=m):"sw"===t?(x.x-=m,x.width+=m,x.height+=m):"s"===t?x.height+=m:"se"===t&&(x.width+=m,x.height+=m));const C=l(x,o,t,y.width,y.height,r,h,s,d);if(!a(n,C)){const e=c(C,y.width,y.height);w(C,e),u&&u(C,e)}},this.onComponentKeyUp=e=>{this.keysDown.delete(e.key)},this.onDocPointerDone=e=>{const{crop:t,disabled:o,onComplete:n,onDragEnd:i}=this.props,r=this.getBox();this.unbindDocMove(),!o&&t&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,i&&i(e),n&&n(p(t,r.width,r.height),c(t,r.width,r.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=e=>{this.componentRef.current&&this.componentRef.current.scrollTo(0,0)}}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:o,width:n,height:i}=e.getBoundingClientRect();return{x:t,y:o,width:n,height:i}}componentDidUpdate(e){const{crop:t,onComplete:o}=this.props;if(o&&!e.crop&&t){const{width:e,height:n}=this.getBox();e&&n&&o(p(t,e,n),c(t,e,n))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,w),this.document.addEventListener("pointerup",this.onDocPointerDone,w),this.document.addEventListener("pointercancel",this.onDocPointerDone,w),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,w),this.document.removeEventListener("pointerup",this.onDocPointerDone,w),this.document.removeEventListener("pointercancel",this.onDocPointerDone,w),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),o=this.makePixelCrop(),n=e.clientX-e.startClientX,i=e.clientY-e.startClientY;return o.x=h(e.startCropX+n,0,t.width-o.width),o.y=h(e.startCropY+i,0,t.height-o.height),o}getPointRegion(e){const{evData:t}=this,o=t.clientX-e.x,n=t.clientY-e.y<t.startCropY;return o<t.startCropX?n?"nw":"sw":n?"ne":"se"}resizeCrop(){const{evData:e}=this,t=this.getBox(),{aspect:o=0,minWidth:n=0,minHeight:i=0,maxWidth:r,maxHeight:h}=this.props,a=this.getPointRegion(t),s=this.makePixelCrop(),d=e.ord?e.ord:a,c=e.clientX-e.startClientX,p=e.clientY-e.startClientY,w={unit:"px",x:0,y:0,width:0,height:0};"ne"===a?(w.x=e.startCropX,w.width=c,o?(w.height=w.width/o,w.y=e.startCropY-w.height):(w.height=Math.abs(p),w.y=e.startCropY-w.height)):"se"===a?(w.x=e.startCropX,w.y=e.startCropY,w.width=c,w.height=o?w.width/o:p):"sw"===a?(w.x=e.startCropX+c,w.y=e.startCropY,w.width=Math.abs(c),w.height=o?w.width/o:p):"nw"===a&&(w.x=e.startCropX+c,w.width=Math.abs(c),o?(w.height=w.width/o,w.y=e.startCropY-w.height):(w.height=Math.abs(p),w.y=e.startCropY+p));const u=l(w,o,a,t.width,t.height,n,i,r,h);return o||g.xyOrds.indexOf(d)>-1?(s.x=u.x,s.y=u.y,s.width=u.width,s.height=u.height):g.xOrds.indexOf(d)>-1?(s.x=u.x,s.width=u.width):g.yOrds.indexOf(d)>-1&&(s.y=u.y,s.height=u.height),s}createCropSelection(){const{ariaLabels:t=g.defaultProps.ariaLabels,disabled:o,locked:n,renderSelectionAddon:i,ruleOfThirds:r,crop:h}=this.props,a=this.getCropStyle();if(h)return(0,e.jsxs)("div",{style:a,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,onKeyUp:this.onComponentKeyUp,children:[!o&&!n&&(0,e.jsxs)("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus,children:[(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"nw")}),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"n")}),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"ne")}),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"e")}),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"se")}),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"s")}),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"sw")}),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"w")})]}),i&&(0,e.jsx)("div",{className:"ReactCrop__selection-addon",onMouseDown:e=>e.stopPropagation(),children:i(this.state)}),r&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"ReactCrop__rule-of-thirds-hz"}),(0,e.jsx)("div",{className:"ReactCrop__rule-of-thirds-vt"})]})]})}makePixelCrop(){const e={...r,...this.props.crop||{}},t=this.getBox();return p(e,t.width,t.height)}render(){const{aspect:t,children:n,circularCrop:i,className:r,crop:h,disabled:a,locked:s,style:d,ruleOfThirds:c}=this.props,{cropIsActive:p,newCropIsBeingDrawn:l}=this.state,w=h?this.createCropSelection():null,g=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=o(e))&&(i&&(i+=" "),i+=t);return i}("ReactCrop",r,{"ReactCrop--active":p,"ReactCrop--disabled":a,"ReactCrop--locked":s,"ReactCrop--new-crop":l,"ReactCrop--fixed-aspect":h&&t,"ReactCrop--circular-crop":h&&i,"ReactCrop--rule-of-thirds":h&&c,"ReactCrop--invisible-crop":!this.dragStarted&&h&&!h.width&&!h.height});return(0,e.jsxs)("div",{ref:this.componentRef,className:g,style:d,children:[(0,e.jsx)("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown,children:n}),w]})}}g.xOrds=["e","w"],g.yOrds=["n","s"],g.xyOrds=["nw","ne","se","sw"],g.nudgeStep=1,g.nudgeStepMedium=10,g.nudgeStepLarge=100,g.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}}})(),i})()));