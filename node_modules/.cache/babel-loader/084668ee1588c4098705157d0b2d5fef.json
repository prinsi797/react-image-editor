{"ast":null,"code":"function Storage() {}\n\nStorage.configure = function (details) {\n  if (!chrome || !chrome.storage) {\n    throw new Error(\"The chrome.storage object is not available.\");\n  }\n\n  if (Storage._configured || Storage._loadingFlag || Storage._loaded) {\n    throw new Error(\"Storage can only be configured once and must be configured before the load method is called.\");\n  }\n\n  Storage._configured = true;\n  var scope = details.scope;\n\n  if (scope) {\n    if (!/^(sync|local)$/.test(scope)) {\n      throw new Error(\"Invalid scope. Must be \\\"local\\\" or \\\"sync\\\"\");\n    }\n\n    Storage._scope = scope;\n  }\n};\n\nStorage.load = function (callback) {\n  if (callback) {\n    Storage._loadingQue.push(callback);\n  }\n\n  if (Storage._loadingFlag) {\n    return;\n  }\n\n  Storage._loadingFlag = true;\n\n  Storage._do(\"get\", [null, function (e) {\n    Storage._snapshot = e;\n    Storage._loadingFlag = false;\n    Storage._loaded = true;\n\n    for (var i in Storage._loadingQue) {\n      Storage._loadingQue[i](e);\n    }\n\n    Storage._loadingQue = [];\n    chrome.storage.onChanged.addListener(Storage._onChanged);\n  }]);\n};\n\nStorage._snapshot = {};\nStorage._scope = \"local\";\nStorage._loaded = false;\nStorage._loadingFlag = false;\nStorage._loadingQue = [];\nStorage._configured = false;\nStorage._debounceQue = [];\nStorage._debounceTimer = null;\n\nStorage._onChanged = function (properties, scope) {\n  if (scope !== Storage._scope) {\n    return;\n  }\n\n  for (var i in properties) {\n    Storage._snapshot[i] = properties[i].newValue;\n  }\n};\n\nStorage._do = function (method, args) {\n  Storage._debounceMethod(function () {\n    chrome.storage[Storage._scope][method].apply(chrome.storage[Storage._scope], args);\n  });\n};\n\nStorage._debounceMethod = function (method) {\n  Storage._debounceQue.push(method);\n\n  Storage._debounceTimer = clearTimeout(Storage._debounceTimer);\n  Storage._debounceTimer = setTimeout(Storage._onDebounceTimer.bind(Storage));\n};\n\nStorage._onDebounceTimer = function () {\n  var copy = [];\n\n  for (var i in Storage._debounceQue) {\n    copy.push(Storage._debounceQue[i]);\n  }\n\n  Storage._debounceQue = [];\n  Storage._debounceTimer = null;\n\n  for (var i in copy) {\n    copy[i]();\n  }\n};\n\nStorage.get = function (key, defaultValue) {\n  if (!Storage._loaded) {\n    throw new Error(\"Storage.load must be called before you can access this method.\");\n  }\n\n  if (key === undefined || key === null) {\n    return Storage._snapshot;\n  } else if (typeof key === \"object\") {\n    var obj = {};\n\n    if (key.constructor === Array) {\n      for (var i in key) {\n        obj[key[i]] = true;\n      }\n    } else {\n      for (var i in key) {\n        obj[i] = true;\n      }\n    }\n\n    for (var i in obj) {\n      obj[i] = Storage._snapshot[i];\n    }\n\n    return obj;\n  } else {\n    var value = Storage._snapshot[key];\n    return value === undefined ? defaultValue : value;\n  }\n};\n\nStorage.set = function (key, value, callback) {\n  if (!Storage._loaded) {\n    throw new Error(\"Storage.load must be called before you can access this method.\");\n  }\n\n  var obj = {};\n\n  if (typeof key === \"object\") {\n    obj = key;\n    callback = value;\n  } else {\n    obj[key] = value;\n  }\n\n  var removes = {};\n  var sets = {};\n  var hasRemoves = false;\n  var hasSets = false;\n\n  for (var i in obj) {\n    if (obj[i] === undefined || obj[i] === null) {\n      removes[i] = obj[i];\n      hasRemoves = true;\n      delete Storage._local[i];\n    } else {\n      sets[i] = obj[i];\n      hasSets = true;\n      Storage._snapshot[i] = obj[i];\n    }\n  }\n\n  if (hasRemoves) {\n    Storage._do(\"remove\", [removes]);\n  }\n\n  if (hasSets) {\n    Storage._do(\"set\", [sets, callback]);\n  } else if (callback) {\n    callback();\n  }\n};\n\nStorage.remove = function (key) {\n  if (!Storage._loaded) {\n    throw new Error(\"Storage.load must be called before you can access this method.\");\n  }\n\n  var keys = typeof key === \"object\" ? key : [key];\n  var obj = {};\n\n  for (var i in keys) {\n    obj[keys[i]] = undefined;\n  }\n\n  Storage.set(obj);\n};\n\nStorage.clear = function (callback) {\n  if (!Storage._loaded) {\n    throw new Error(\"Storage.load must be called before you can access this method.\");\n  }\n\n  Storage._snapshot = {};\n\n  Storage._do(\"clear\", [callback]);\n};\n\nmodule ? module.exports = Storage : null;","map":{"version":3,"names":["Storage","configure","details","chrome","storage","Error","_configured","_loadingFlag","_loaded","scope","test","_scope","load","callback","_loadingQue","push","_do","e","_snapshot","i","onChanged","addListener","_onChanged","_debounceQue","_debounceTimer","properties","newValue","method","args","_debounceMethod","apply","clearTimeout","setTimeout","_onDebounceTimer","bind","copy","get","key","defaultValue","undefined","obj","constructor","Array","value","set","removes","sets","hasRemoves","hasSets","_local","remove","keys","clear","module","exports"],"sources":["D:/screenshort-extension/new1/react-image-editor/node_modules/chrome-storage/Storage.js"],"sourcesContent":["function Storage(){}\n\nStorage.configure = function(details) {\n    if (!chrome || !chrome.storage) {\n        throw new Error(\"The chrome.storage object is not available.\");\n    }\n    if (Storage._configured || Storage._loadingFlag || Storage._loaded) {\n        throw new Error(\"Storage can only be configured once and must be configured before the load method is called.\");\n    }\n    Storage._configured = true;\n    var scope = details.scope;\n    if (scope) {\n        if (!/^(sync|local)$/.test(scope)) {\n            throw new Error(\"Invalid scope. Must be \\\"local\\\" or \\\"sync\\\"\");\n        }\n        Storage._scope = scope;\n    }\n}\n\nStorage.load = function(callback) {\n    if (callback) {\n        Storage._loadingQue.push(callback);\n    }\n    if (Storage._loadingFlag) {\n        return;\n    }\n    Storage._loadingFlag = true;\n    Storage._do(\"get\", [null, function(e) {\n        Storage._snapshot = e;\n        Storage._loadingFlag = false;\n        Storage._loaded = true;\n        for (var i in Storage._loadingQue) {\n            Storage._loadingQue[i](e);\n        }\n        Storage._loadingQue = [];\n        chrome.storage.onChanged.addListener(Storage._onChanged);\n    }]);\n}\n\nStorage._snapshot = {};\nStorage._scope = \"local\";\nStorage._loaded = false;\nStorage._loadingFlag = false;\nStorage._loadingQue = [];\nStorage._configured = false;\nStorage._debounceQue = [];\nStorage._debounceTimer = null;\n\nStorage._onChanged = function(properties, scope) {\n    if (scope !== Storage._scope) {\n        return;\n    }\n    for (var i in properties) {\n        Storage._snapshot[i] = properties[i].newValue;\n    }\n}\n\nStorage._do = function(method, args) {\n    Storage._debounceMethod(function() {\n        chrome.storage[Storage._scope][method].apply(chrome.storage[Storage._scope], args);\n    });\n}\n\nStorage._debounceMethod = function(method) {\n    Storage._debounceQue.push(method);\n    Storage._debounceTimer = clearTimeout(Storage._debounceTimer);\n    Storage._debounceTimer = setTimeout(Storage._onDebounceTimer.bind(Storage));\n}\n\nStorage._onDebounceTimer = function() {\n    var copy = [];\n    for (var i in Storage._debounceQue) {\n        copy.push(Storage._debounceQue[i]);\n    }\n    Storage._debounceQue = [];\n    Storage._debounceTimer = null;\n    for (var i in copy) {\n        copy[i]();\n    }\n}\n\nStorage.get = function(key, defaultValue) {\n    if (!Storage._loaded) {\n        throw new Error(\"Storage.load must be called before you can access this method.\");\n    }\n    if (key === undefined || key === null) {\n        return Storage._snapshot;\n    }\n    else if (typeof(key) === \"object\") {\n        var obj = {};\n        if (key.constructor === Array) {\n            for (var i in key) {\n                obj[key[i]] = true;\n            }\n        }\n        else {\n            for (var i in key) {\n                obj[i] = true;\n            }\n        }\n        for (var i in obj) {\n            obj[i] = Storage._snapshot[i];\n        }\n        return obj;\n    }\n    else {\n        var value = Storage._snapshot[key];\n        return value === undefined ? defaultValue : value;\n    }\n}\n\nStorage.set = function(key, value, callback) {\n    if (!Storage._loaded) {\n        throw new Error(\"Storage.load must be called before you can access this method.\");\n    }\n    var obj = {};\n    if (typeof(key) === \"object\") {\n        obj = key;\n        callback = value;\n    }\n    else {\n        obj[key] = value;\n    }\n    var removes = {};\n    var sets = {};\n    var hasRemoves = false;\n    var hasSets = false;\n    for (var i in obj) {\n        if (obj[i] === undefined || obj[i] === null) {\n            removes[i] = obj[i];\n            hasRemoves = true;\n            delete Storage._local[i];\n        \n        }\n        else {\n            sets[i] = obj[i];\n            hasSets = true;\n            Storage._snapshot[i] = obj[i];\n        }\n    }\n    if (hasRemoves) {\n        Storage._do(\"remove\", [removes]);\n    }\n    if (hasSets) {\n        Storage._do(\"set\", [sets, callback]);\n    }\n    else if (callback) {\n        callback();\n    }\n}\n\nStorage.remove = function(key) {\n    if (!Storage._loaded) {\n        throw new Error(\"Storage.load must be called before you can access this method.\");\n    }\n    var keys = typeof(key) === \"object\" ? key : [key];\n    var obj = {};\n    for (var i in keys) {\n        obj[keys[i]] = undefined;\n    }\n    Storage.set(obj);\n}\n\nStorage.clear = function(callback) {\n    if (!Storage._loaded) {\n        throw new Error(\"Storage.load must be called before you can access this method.\");\n    }\n    Storage._snapshot = {};\n    Storage._do(\"clear\", [callback]);\n}\n\nmodule ? (module.exports = Storage) : null;"],"mappings":"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"},"metadata":{},"sourceType":"script"}