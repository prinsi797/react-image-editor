{"ast":null,"code":"var _jsxFileName = \"D:\\\\screenshort-extension\\\\image-editor-react\\\\src\\\\component\\\\Main.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport './style/main.scss';\nimport ReactCrop from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport { GrRotateLeft, GrRotateRight, GrEdit, GrSuperscript } from 'react-icons/gr';\nimport { CgMergeVertical, CgMergeHorizontal } from 'react-icons/cg';\nimport { IoMdUndo, IoMdRedo, IoIosImage } from 'react-icons/io';\nimport storeData from './LinkedList';\nimport { Stage, Layer, Text } from 'react-konva';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Main = () => {\n  _s();\n\n  var _textBoxes$find, _textBoxes$find2, _textBoxes$find3;\n\n  const filterElement = [{\n    name: 'brightness',\n    maxValue: 200\n  }, {\n    name: 'grayscale',\n    maxValue: 100\n  }, {\n    name: 'sepia',\n    maxValue: 100\n  }, {\n    name: 'saturate',\n    maxValue: 200\n  }, {\n    name: 'contrast',\n    maxValue: 200\n  }, {\n    name: 'hueRotate',\n    maxValue: 360\n  }];\n  const [property, setProperty] = useState({\n    name: 'brightness',\n    maxValue: 200\n  });\n  const [details, setDetails] = useState(null);\n  const [crop, setCrop] = useState({});\n  const [drawing, setDrawing] = useState(false);\n  const [textBoxes, setTextBoxes] = useState([]);\n  const [currentText, setCurrentText] = useState('');\n  const canvasRef = useRef(null);\n  const [state, setState] = useState({\n    image: '',\n    brightness: 100,\n    grayscale: 0,\n    sepia: 0,\n    saturate: 100,\n    contrast: 100,\n    hueRotate: 0,\n    rotate: 0,\n    vartical: 1,\n    horizental: 1\n  });\n  useEffect(() => {\n    if (details) {\n      drawImage();\n    }\n  }, [state, details, crop]);\n\n  const drawImage = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    if (!details || !canvas) return;\n    const {\n      width,\n      height\n    } = canvas;\n    ctx.clearRect(0, 0, width, height);\n    ctx.filter = `brightness(${state.brightness}%) sepia(${state.sepia}%) saturate(${state.saturate}%) contrast(${state.contrast}%) grayscale(${state.grayscale}%) hue-rotate(${state.hueRotate}deg)`;\n    ctx.translate(width / 2, height / 2);\n    ctx.rotate(state.rotate * Math.PI / 180);\n    ctx.scale(state.vartical, state.horizental);\n    ctx.drawImage(details, -width / 2, -height / 2, width, height);\n  };\n\n  const inputHandle = e => {\n    setState({ ...state,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const leftRotate = () => {\n    setState(prevState => ({ ...prevState,\n      rotate: prevState.rotate - 90\n    }));\n    storeData.insert({ ...state,\n      rotate: state.rotate - 90\n    });\n  };\n\n  const rightRotate = () => {\n    setState(prevState => ({ ...prevState,\n      rotate: prevState.rotate + 90\n    }));\n    storeData.insert({ ...state,\n      rotate: state.rotate + 90\n    });\n  };\n\n  const varticalFlip = () => {\n    setState(prevState => ({ ...prevState,\n      vartical: prevState.vartical === 1 ? -1 : 1\n    }));\n    storeData.insert({ ...state,\n      vartical: state.vartical === 1 ? -1 : 1\n    });\n  };\n\n  const horizentalFlip = () => {\n    setState(prevState => ({ ...prevState,\n      horizental: prevState.horizental === 1 ? -1 : 1\n    }));\n    storeData.insert({ ...state,\n      horizental: state.horizental === 1 ? -1 : 1\n    });\n  };\n\n  const redo = () => {\n    const data = storeData.redoEdit();\n\n    if (data) {\n      setState(data);\n    }\n  };\n\n  const undo = () => {\n    const data = storeData.undoEdit();\n\n    if (data) {\n      setState(data);\n    }\n  };\n\n  const imageHandle = e => {\n    if (e.target.files.length !== 0) {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        const img = new Image();\n        img.src = reader.result;\n\n        img.onload = () => {\n          setDetails(img);\n          setState({ ...state,\n            image: reader.result\n          });\n          storeData.insert({\n            image: reader.result,\n            brightness: 100,\n            grayscale: 0,\n            sepia: 0,\n            saturate: 100,\n            contrast: 100,\n            hueRotate: 0,\n            rotate: 0,\n            vartical: 1,\n            horizental: 1\n          });\n        };\n      };\n\n      reader.readAsDataURL(e.target.files[0]);\n    }\n  };\n\n  const imageCrop = () => {\n    if (!details || !crop || !canvasRef.current) return;\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    const scaleX = details.naturalWidth / details.width;\n    const scaleY = details.naturalHeight / details.height;\n    canvas.width = crop.width;\n    canvas.height = crop.height;\n    ctx.drawImage(details, crop.x * scaleX, crop.y * scaleY, crop.width * scaleX, crop.height * scaleY, 0, 0, crop.width, crop.height);\n    const base64Url = canvas.toDataURL('image/jpeg');\n    setState({ ...state,\n      image: base64Url\n    });\n  };\n\n  const saveImage = () => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (!details) return;\n    canvas.width = details.naturalWidth;\n    canvas.height = details.naturalHeight;\n    ctx.filter = `brightness(${state.brightness}%) sepia(${state.sepia}%) saturate(${state.saturate}%) contrast(${state.contrast}%) grayscale(${state.grayscale}%) hue-rotate(${state.hueRotate}deg)`;\n    ctx.translate(canvas.width / 2, canvas.height / 2);\n    ctx.rotate(state.rotate * Math.PI / 180);\n    ctx.scale(state.vartical, state.horizental);\n    ctx.drawImage(details, -canvas.width / 2, -canvas.height / 2, canvas.width, canvas.height);\n    const link = document.createElement('a');\n    link.download = 'image_edit.jpg';\n    link.href = canvas.toDataURL();\n    link.click();\n  };\n\n  const startDrawing = e => {\n    if (drawing) {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      ctx.beginPath();\n      ctx.moveTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n    }\n  };\n\n  const draw = e => {\n    if (drawing) {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      ctx.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n      ctx.strokeStyle = '#000000'; // Set the pencil color (black)\n\n      ctx.lineWidth = 2; // Set the pencil width\n\n      ctx.lineCap = 'round'; // Set the line cap for smoother lines\n\n      ctx.stroke();\n    }\n  };\n\n  const stopDrawing = () => {\n    if (drawing) {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      ctx.closePath();\n    }\n  };\n\n  const enableDrawing = () => {\n    setDrawing(!drawing);\n  };\n\n  const textAdd = () => {\n    setTextBoxes([...textBoxes, {\n      id: textBoxes.length,\n      x: 50,\n      y: 50,\n      text: 'Double-click to edit',\n      draggable: true\n    }]);\n  };\n\n  const handleTextChange = (e, id) => {\n    const newTextBoxes = textBoxes.map(box => {\n      if (box.id === id) {\n        return { ...box,\n          text: e.target.value\n        };\n      }\n\n      return box;\n    });\n    setTextBoxes(newTextBoxes);\n  };\n\n  const handleDragEnd = (e, id) => {\n    const newTextBoxes = textBoxes.map(box => {\n      if (box.id === id) {\n        return { ...box,\n          x: e.target.x(),\n          y: e.target.y()\n        };\n      }\n\n      return box;\n    });\n    setTextBoxes(newTextBoxes);\n  };\n\n  const handleDblClick = id => {\n    setCurrentText(id);\n  };\n\n  const handleBlur = () => {\n    setCurrentText('');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"image-editor\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Image Editor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tools-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icon-button\",\n        onClick: leftRotate,\n        children: /*#__PURE__*/_jsxDEV(GrRotateLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 70\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icon-button\",\n        onClick: rightRotate,\n        children: /*#__PURE__*/_jsxDEV(GrRotateRight, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 71\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icon-button\",\n        onClick: enableDrawing,\n        children: /*#__PURE__*/_jsxDEV(GrEdit, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 73\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icon-button\",\n        onClick: textAdd,\n        children: /*#__PURE__*/_jsxDEV(GrSuperscript, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 67\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icon-button\",\n        onClick: varticalFlip,\n        children: /*#__PURE__*/_jsxDEV(CgMergeVertical, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 72\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icon-button\",\n        onClick: horizentalFlip,\n        children: /*#__PURE__*/_jsxDEV(CgMergeHorizontal, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 74\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icon-button\",\n        onClick: undo,\n        children: /*#__PURE__*/_jsxDEV(IoMdUndo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 64\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icon-button\",\n        onClick: redo,\n        children: /*#__PURE__*/_jsxDEV(IoMdRedo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 64\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"filter\",\n        children: \"Filters:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"filter\",\n        id: \"filter\",\n        value: property.name,\n        onChange: e => {\n          const selectedProperty = filterElement.find(item => item.name === e.target.value);\n          setProperty(selectedProperty);\n        },\n        children: filterElement.map((element, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: element.name,\n          children: element.name\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"value-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"0\",\n          max: property.maxValue,\n          value: state[property.name],\n          name: property.name,\n          onChange: inputHandle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [state[property.name], \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"canvas-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"crop-container\",\n        children: /*#__PURE__*/_jsxDEV(ReactCrop, {\n          crop: crop,\n          onChange: setCrop,\n          children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: canvasRef,\n            width: \"500px\",\n            height: \"500px\",\n            onMouseDown: startDrawing,\n            onMouseMove: draw,\n            onMouseUp: stopDrawing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"crop-button\",\n        onClick: imageCrop,\n        children: \"Crop Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"save-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: imageHandle,\n        id: \"upload\",\n        className: \"file-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"upload\",\n        className: \"upload-label\",\n        children: [/*#__PURE__*/_jsxDEV(IoIosImage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 21\n        }, this), \" Choose Image\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"save-button\",\n        onClick: saveImage,\n        children: \"Save Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Stage, {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      children: /*#__PURE__*/_jsxDEV(Layer, {\n        children: textBoxes.map((box, index) => /*#__PURE__*/_jsxDEV(Text, {\n          x: box.x,\n          y: box.y,\n          text: box.text,\n          fontSize: 20,\n          draggable: true,\n          onDragEnd: e => handleDragEnd(e, box.id),\n          onDblClick: () => handleDblClick(box.id),\n          fill: \"black\"\n        }, box.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }, this), currentText !== '' && /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: ((_textBoxes$find = textBoxes.find(box => box.id === currentText)) === null || _textBoxes$find === void 0 ? void 0 : _textBoxes$find.text) || '',\n      onChange: e => handleTextChange(e, currentText),\n      onBlur: handleBlur,\n      className: \"text-input\",\n      style: {\n        position: 'absolute',\n        top: `${((_textBoxes$find2 = textBoxes.find(box => box.id === currentText)) === null || _textBoxes$find2 === void 0 ? void 0 : _textBoxes$find2.y) || 0}px`,\n        left: `${((_textBoxes$find3 = textBoxes.find(box => box.id === currentText)) === null || _textBoxes$find3 === void 0 ? void 0 : _textBoxes$find3.x) || 0}px`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 272,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Main, \"p7Lk/RO3eCntvL4Vje9JS067Qx4=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ReactCrop","GrRotateLeft","GrRotateRight","GrEdit","GrSuperscript","CgMergeVertical","CgMergeHorizontal","IoMdUndo","IoMdRedo","IoIosImage","storeData","Stage","Layer","Text","Main","filterElement","name","maxValue","property","setProperty","details","setDetails","crop","setCrop","drawing","setDrawing","textBoxes","setTextBoxes","currentText","setCurrentText","canvasRef","state","setState","image","brightness","grayscale","sepia","saturate","contrast","hueRotate","rotate","vartical","horizental","drawImage","canvas","current","ctx","getContext","width","height","clearRect","filter","translate","Math","PI","scale","inputHandle","e","target","value","leftRotate","prevState","insert","rightRotate","varticalFlip","horizentalFlip","redo","data","redoEdit","undo","undoEdit","imageHandle","files","length","reader","FileReader","onload","img","Image","src","result","readAsDataURL","imageCrop","document","createElement","scaleX","naturalWidth","scaleY","naturalHeight","x","y","base64Url","toDataURL","saveImage","link","download","href","click","startDrawing","beginPath","moveTo","nativeEvent","offsetX","offsetY","draw","lineTo","strokeStyle","lineWidth","lineCap","stroke","stopDrawing","closePath","enableDrawing","textAdd","id","text","draggable","handleTextChange","newTextBoxes","map","box","handleDragEnd","handleDblClick","handleBlur","selectedProperty","find","item","element","index","window","innerWidth","innerHeight","position","top","left"],"sources":["D:/screenshort-extension/image-editor-react/src/component/Main.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport './style/main.scss';\r\nimport ReactCrop from 'react-image-crop';\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport { GrRotateLeft, GrRotateRight, GrEdit, GrSuperscript } from 'react-icons/gr';\r\nimport { CgMergeVertical, CgMergeHorizontal } from 'react-icons/cg';\r\nimport { IoMdUndo, IoMdRedo, IoIosImage } from 'react-icons/io';\r\nimport storeData from './LinkedList';\r\nimport { Stage, Layer, Text } from 'react-konva';\r\n\r\nconst Main = () => {\r\n    const filterElement = [\r\n        { name: 'brightness', maxValue: 200 },\r\n        { name: 'grayscale', maxValue: 100 },\r\n        { name: 'sepia', maxValue: 100 },\r\n        { name: 'saturate', maxValue: 200 },\r\n        { name: 'contrast', maxValue: 200 },\r\n        { name: 'hueRotate', maxValue: 360 }\r\n    ];\r\n    \r\n    const [property, setProperty] = useState({ name: 'brightness', maxValue: 200 });\r\n    const [details, setDetails] = useState(null);\r\n    const [crop, setCrop] = useState({});\r\n    const [drawing, setDrawing] = useState(false);\r\n    const [textBoxes, setTextBoxes] = useState([]);\r\n    const [currentText, setCurrentText] = useState('');\r\n    const canvasRef = useRef(null);\r\n    \r\n    const [state, setState] = useState({\r\n        image: '',\r\n        brightness: 100,\r\n        grayscale: 0,\r\n        sepia: 0,\r\n        saturate: 100,\r\n        contrast: 100,\r\n        hueRotate: 0,\r\n        rotate: 0,\r\n        vartical: 1,\r\n        horizental: 1\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (details) {\r\n            drawImage();\r\n        }\r\n    }, [state, details, crop]);\r\n\r\n    const drawImage = () => {\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        if (!details || !canvas) return;\r\n        \r\n        const { width, height } = canvas;\r\n        ctx.clearRect(0, 0, width, height);\r\n\r\n        ctx.filter = `brightness(${state.brightness}%) sepia(${state.sepia}%) saturate(${state.saturate}%) contrast(${state.contrast}%) grayscale(${state.grayscale}%) hue-rotate(${state.hueRotate}deg)`;\r\n        ctx.translate(width / 2, height / 2);\r\n        ctx.rotate(state.rotate * Math.PI / 180);\r\n        ctx.scale(state.vartical, state.horizental);\r\n        ctx.drawImage(details, -width / 2, -height / 2, width, height);\r\n    };\r\n\r\n    const inputHandle = (e) => {\r\n        setState({\r\n            ...state,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n\r\n    const leftRotate = () => {\r\n        setState(prevState => ({\r\n            ...prevState,\r\n            rotate: prevState.rotate - 90\r\n        }));\r\n        storeData.insert({...state, rotate: state.rotate - 90});\r\n    };\r\n\r\n    const rightRotate = () => {\r\n        setState(prevState => ({\r\n            ...prevState,\r\n            rotate: prevState.rotate + 90\r\n        }));\r\n        storeData.insert({...state, rotate: state.rotate + 90});\r\n    };\r\n\r\n    const varticalFlip = () => {\r\n        setState(prevState => ({\r\n            ...prevState,\r\n            vartical: prevState.vartical === 1 ? -1 : 1\r\n        }));\r\n        storeData.insert({...state, vartical: state.vartical === 1 ? -1 : 1});\r\n    };\r\n\r\n    const horizentalFlip = () => {\r\n        setState(prevState => ({\r\n            ...prevState,\r\n            horizental: prevState.horizental === 1 ? -1 : 1\r\n        }));\r\n        storeData.insert({...state, horizental: state.horizental === 1 ? -1 : 1});\r\n    };\r\n\r\n    const redo = () => {\r\n        const data = storeData.redoEdit();\r\n        if (data) {\r\n            setState(data);\r\n        }\r\n    };\r\n\r\n    const undo = () => {\r\n        const data = storeData.undoEdit();\r\n        if (data) {\r\n            setState(data);\r\n        }\r\n    };\r\n\r\n    const imageHandle = (e) => {\r\n        if (e.target.files.length !== 0) {\r\n            const reader = new FileReader();\r\n            reader.onload = () => {\r\n                const img = new Image();\r\n                img.src = reader.result;\r\n                img.onload = () => {\r\n                    setDetails(img);\r\n                    setState({\r\n                        ...state,\r\n                        image: reader.result\r\n                    });\r\n                    storeData.insert({\r\n                        image: reader.result,\r\n                        brightness: 100,\r\n                        grayscale: 0,\r\n                        sepia: 0,\r\n                        saturate: 100,\r\n                        contrast: 100,\r\n                        hueRotate: 0,\r\n                        rotate: 0,\r\n                        vartical: 1,\r\n                        horizental: 1\r\n                    });\r\n                };\r\n            };\r\n            reader.readAsDataURL(e.target.files[0]);\r\n        }\r\n    };\r\n\r\n    const imageCrop = () => {\r\n        if (!details || !crop || !canvasRef.current) return;\r\n        \r\n        const canvas = document.createElement('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n        const scaleX = details.naturalWidth / details.width;\r\n        const scaleY = details.naturalHeight / details.height;\r\n\r\n        canvas.width = crop.width;\r\n        canvas.height = crop.height;\r\n\r\n        ctx.drawImage(\r\n            details,\r\n            crop.x * scaleX,\r\n            crop.y * scaleY,\r\n            crop.width * scaleX,\r\n            crop.height * scaleY,\r\n            0,\r\n            0,\r\n            crop.width,\r\n            crop.height\r\n        );\r\n\r\n        const base64Url = canvas.toDataURL('image/jpeg');\r\n        setState({\r\n            ...state,\r\n            image: base64Url\r\n        });\r\n    };\r\n\r\n    const saveImage = () => {\r\n        const canvas = document.createElement('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n\r\n        if (!details) return;\r\n\r\n        canvas.width = details.naturalWidth;\r\n        canvas.height = details.naturalHeight;\r\n        \r\n        ctx.filter = `brightness(${state.brightness}%) sepia(${state.sepia}%) saturate(${state.saturate}%) contrast(${state.contrast}%) grayscale(${state.grayscale}%) hue-rotate(${state.hueRotate}deg)`;\r\n        ctx.translate(canvas.width / 2, canvas.height / 2);\r\n        ctx.rotate(state.rotate * Math.PI / 180);\r\n        ctx.scale(state.vartical, state.horizental);\r\n        ctx.drawImage(\r\n            details,\r\n            -canvas.width / 2,\r\n            -canvas.height / 2,\r\n            canvas.width,\r\n            canvas.height\r\n        );\r\n\r\n        const link = document.createElement('a');\r\n        link.download = 'image_edit.jpg';\r\n        link.href = canvas.toDataURL();\r\n        link.click();\r\n    };\r\n\r\n    const startDrawing = (e) => {\r\n        if (drawing) {\r\n            const canvas = canvasRef.current;\r\n            const ctx = canvas.getContext('2d');\r\n            ctx.beginPath();\r\n            ctx.moveTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\r\n        }\r\n    };\r\n    \r\n    const draw = (e) => {\r\n        if (drawing) {\r\n            const canvas = canvasRef.current;\r\n            const ctx = canvas.getContext('2d');\r\n            ctx.lineTo(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\r\n            ctx.strokeStyle = '#000000'; // Set the pencil color (black)\r\n            ctx.lineWidth = 2; // Set the pencil width\r\n            ctx.lineCap = 'round'; // Set the line cap for smoother lines\r\n            ctx.stroke();\r\n        }\r\n    };\r\n    \r\n    const stopDrawing = () => {\r\n        if (drawing) {\r\n            const canvas = canvasRef.current;\r\n            const ctx = canvas.getContext('2d');\r\n            ctx.closePath();\r\n        }\r\n    };\r\n    \r\n    const enableDrawing = () => {\r\n        setDrawing(!drawing);\r\n    };\r\n\r\n    const textAdd = () => {\r\n        setTextBoxes([\r\n            ...textBoxes,\r\n            { id: textBoxes.length, x: 50, y: 50, text: 'Double-click to edit', draggable: true }\r\n        ]);\r\n    };\r\n\r\n    const handleTextChange = (e, id) => {\r\n        const newTextBoxes = textBoxes.map(box => {\r\n            if (box.id === id) {\r\n                return { ...box, text: e.target.value };\r\n            }\r\n            return box;\r\n        });\r\n        setTextBoxes(newTextBoxes);\r\n    };\r\n\r\n    const handleDragEnd = (e, id) => {\r\n        const newTextBoxes = textBoxes.map(box => {\r\n            if (box.id === id) {\r\n                return { ...box, x: e.target.x(), y: e.target.y() };\r\n            }\r\n            return box;\r\n        });\r\n        setTextBoxes(newTextBoxes);\r\n    };\r\n\r\n    const handleDblClick = (id) => {\r\n        setCurrentText(id);\r\n    };\r\n\r\n    const handleBlur = () => {\r\n        setCurrentText('');\r\n    };\r\n\r\n    return (\r\n        <div className=\"image-editor\">\r\n            <div className=\"app-header\">\r\n                <h2>Image Editor</h2>\r\n            </div>\r\n            <div className=\"tools-section\">\r\n                <button className=\"icon-button\" onClick={leftRotate}><GrRotateLeft /></button>\r\n                <button className=\"icon-button\" onClick={rightRotate}><GrRotateRight /></button>\r\n                <button className=\"icon-button\" onClick={enableDrawing}><GrEdit /></button>\r\n                <button className=\"icon-button\" onClick={textAdd}><GrSuperscript /></button>\r\n                <button className=\"icon-button\" onClick={varticalFlip}><CgMergeVertical /></button>\r\n                <button className=\"icon-button\" onClick={horizentalFlip}><CgMergeHorizontal /></button>\r\n                <button className=\"icon-button\" onClick={undo}><IoMdUndo /></button>\r\n                <button className=\"icon-button\" onClick={redo}><IoMdRedo /></button>\r\n            </div>\r\n            <div className=\"filters-section\">\r\n                <label htmlFor=\"filter\">Filters:</label>\r\n                <select\r\n                    name=\"filter\"\r\n                    id=\"filter\"\r\n                    value={property.name}\r\n                    onChange={e => {\r\n                        const selectedProperty = filterElement.find(\r\n                            item => item.name === e.target.value\r\n                        );\r\n                        setProperty(selectedProperty);\r\n                    }}\r\n                >\r\n                    {filterElement.map((element, index) => (\r\n                        <option value={element.name} key={index}>\r\n                            {element.name}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n                <div className=\"value-section\">\r\n                    <input\r\n                        type=\"range\"\r\n                        min=\"0\"\r\n                        max={property.maxValue}\r\n                        value={state[property.name]}\r\n                        name={property.name}\r\n                        onChange={inputHandle}\r\n                    />\r\n                    <span>{state[property.name]}%</span>\r\n                </div>\r\n            </div>\r\n            <div className=\"canvas-section\">\r\n                <div className=\"crop-container\">\r\n                    <ReactCrop crop={crop} onChange={setCrop}>\r\n                        <canvas\r\n                            ref={canvasRef}\r\n                            width=\"500px\"\r\n                            height=\"500px\"\r\n                            onMouseDown={startDrawing}\r\n                            onMouseMove={draw}\r\n                            onMouseUp={stopDrawing}\r\n                        ></canvas>\r\n                    </ReactCrop>\r\n                </div>\r\n                <button className=\"crop-button\" onClick={imageCrop}>\r\n                    Crop Image\r\n                </button>\r\n            </div>\r\n            <div className=\"save-section\">\r\n                <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={imageHandle}\r\n                    id=\"upload\"\r\n                    className=\"file-input\"\r\n                />\r\n                <label htmlFor=\"upload\" className=\"upload-label\">\r\n                    <IoIosImage /> Choose Image\r\n                </label>\r\n                <button className=\"save-button\" onClick={saveImage}>\r\n                    Save Image\r\n                </button>\r\n            </div>\r\n            <Stage width={window.innerWidth} height={window.innerHeight}>\r\n                <Layer>\r\n                    {textBoxes.map((box, index) => (\r\n                        <Text\r\n                            key={box.id}\r\n                            x={box.x}\r\n                            y={box.y}\r\n                            text={box.text}\r\n                            fontSize={20}\r\n                            draggable\r\n                            onDragEnd={(e) => handleDragEnd(e, box.id)}\r\n                            onDblClick={() => handleDblClick(box.id)}\r\n                            fill=\"black\"\r\n                        />\r\n                    ))}\r\n                </Layer>\r\n            </Stage>\r\n            {currentText !== '' && (\r\n                <input\r\n                    type=\"text\"\r\n                    value={textBoxes.find(box => box.id === currentText)?.text || ''}\r\n                    onChange={(e) => handleTextChange(e, currentText)}\r\n                    onBlur={handleBlur}\r\n                    className=\"text-input\"\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: `${textBoxes.find(box => box.id === currentText)?.y || 0}px`,\r\n                        left: `${textBoxes.find(box => box.id === currentText)?.x || 0}px`,\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Main;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}